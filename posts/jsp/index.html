<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java Server Pages | XhstormR</title><meta name=keywords content="JSP"><meta name=description content="Java Server Pages - XhstormR"><meta name=author content="XhstormR"><link rel=canonical href=https://xhstormr.github.io/blog/posts/jsp/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://xhstormr.github.io/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://xhstormr.github.io/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://xhstormr.github.io/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://xhstormr.github.io/blog/apple-touch-icon.png><link rel=mask-icon href=https://xhstormr.github.io/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://xhstormr.github.io/blog/posts/jsp/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://xhstormr.github.io/blog/posts/jsp/"><meta property="og:site_name" content="XhstormR"><meta property="og:title" content="Java Server Pages"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-03-09T23:30:26+08:00"><meta property="article:modified_time" content="2017-03-09T23:30:26+08:00"><meta property="article:tag" content="JSP"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java Server Pages"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://xhstormr.github.io/blog/posts/"},{"@type":"ListItem","position":2,"name":"Java Server Pages","item":"https://xhstormr.github.io/blog/posts/jsp/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java Server Pages","name":"Java Server Pages","description":"","keywords":["JSP"],"articleBody":"Updated on 2017-03-09\nhttps://tomcat.apache.org/index.html\nhttps://tomcat.apache.org/tomcat-9.0-doc/api/allclasses-noframe.html\nhttps://tomcat.apache.org/tomcat-9.0-doc/jspapi/allclasses-noframe.html\nhttps://tomcat.apache.org/tomcat-9.0-doc/servletapi/allclasses-noframe.html\nTomcat 环境变量 变量值 变量名 CATALINA_HOME D:\\Download\\apache-tomcat-9.0.0 配置 Tomcat 安装路径 —————————— ————————————————— —————————— 默认欢迎页 D:\\Download\\apache-tomcat-9.0.0\\conf\\web.xml ⇳ index.html index.htm index.jsp 默认端口号 D:\\Download\\apache-tomcat-9.0.0\\conf\\server.xml ⇳ ","wordCount":"1641","inLanguage":"en","datePublished":"2017-03-09T23:30:26+08:00","dateModified":"2017-03-09T23:30:26+08:00","author":{"@type":"Person","name":"XhstormR"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xhstormr.github.io/blog/posts/jsp/"},"publisher":{"@type":"Organization","name":"XhstormR","logo":{"@type":"ImageObject","url":"https://xhstormr.github.io/blog/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xhstormr.github.io/blog/ accesskey=h title="XhstormR (Alt + H)">XhstormR</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xhstormr.github.io/blog/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://xhstormr.github.io/blog/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://xhstormr.github.io/blog/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xhstormr.github.io/blog/>Home</a>&nbsp;»&nbsp;<a href=https://xhstormr.github.io/blog/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Java Server Pages</h1><div class=post-meta><span title='2017-03-09 23:30:26 +0800 +0800'>2017-03-09</span>&nbsp;·&nbsp;<span>8 min</span>&nbsp;·&nbsp;<span>XhstormR</span>&nbsp;|&nbsp;<span>
<a href=https://github.com/XhstormR/blog/tree/master/content/posts/jsp.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></span></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#tomcat aria-label=Tomcat>Tomcat</a><ul><li><a href=#%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f aria-label=环境变量>环境变量</a></li><li><a href=#%e9%bb%98%e8%ae%a4%e6%ac%a2%e8%bf%8e%e9%a1%b5 aria-label=默认欢迎页>默认欢迎页</a></li><li><a href=#%e9%bb%98%e8%ae%a4%e7%ab%af%e5%8f%a3%e5%8f%b7 aria-label=默认端口号>默认端口号</a></li><li><a href=#%e5%8e%bb%e6%8e%89%e7%a9%ba%e7%99%bd%e8%a1%8c aria-label=去掉空白行>去掉空白行</a></li><li><a href=#idea-deployment aria-label="IDEA Deployment">IDEA Deployment</a></li><li><a href=#idea-dependence aria-label="IDEA Dependence">IDEA Dependence</a></li></ul></li><li><a href=#jsp aria-label=JSP>JSP</a><ul><li><a href=#%e6%8c%87%e4%bb%a4 aria-label=指令>指令</a><ul><li><a href=#page aria-label=page>page</a></li><li><a href=#include aria-label=include>include</a><ul><li><a href=#include-%e6%8c%87%e4%bb%a4%e4%b8%8e-include-%e5%8a%a8%e4%bd%9c%e7%9a%84%e5%af%b9%e6%af%94 aria-label="include 指令与 include 动作的对比">include 指令与 include 动作的对比</a></li></ul></li><li><a href=#taglib aria-label=taglib>taglib</a></li></ul></li><li><a href=#%e6%b3%a8%e9%87%8a aria-label=注释>注释</a></li><li><a href=#%e5%a3%b0%e6%98%8e aria-label=声明>声明</a></li><li><a href=#%e8%84%9a%e6%9c%ac aria-label=脚本>脚本</a></li><li><a href=#%e8%a1%a8%e8%be%be%e5%bc%8f aria-label=表达式>表达式</a></li></ul></li><li><a href=#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f aria-label=生命周期>生命周期</a></li><li><a href=#%e5%86%85%e7%bd%ae%e5%af%b9%e8%b1%a1 aria-label=内置对象>内置对象</a><ul><li><a href=#out aria-label=out>out</a></li><li><a href=#request aria-label=request>request</a></li><li><a href=#response aria-label=response>response</a></li><li><a href=#session aria-label=session>session</a></li><li><a href=#application aria-label=application>application</a></li><li><a href=#page-1 aria-label=page>page</a></li><li><a href=#pagecontext aria-label=pageContext>pageContext</a></li><li><a href=#config aria-label=config>config</a></li><li><a href=#exception aria-label=exception>exception</a></li></ul></li><li><a href=#javabean aria-label=JavaBean>JavaBean</a><ul><li><a href=#userbean aria-label=UserBean>UserBean</a></li><li><a href=#jsp-%e5%8a%a8%e4%bd%9cusebeansetgetproperty aria-label="JSP 动作：useBean、set（get）Property">JSP 动作：useBean、set（get）Property</a></li></ul></li><li><a href=#cookie aria-label=Cookie>Cookie</a><ul><li><a href=#cookie-%e4%b8%8e-session-%e7%9a%84%e5%af%b9%e6%af%94 aria-label="Cookie 与 Session 的对比">Cookie 与 Session 的对比</a></li></ul></li></ul></div></details></div><div class=post-content><p>Updated on 2017-03-09</p><blockquote><img loading=lazy src=/blog/uploads/java-jsp.png title="Java Server Pages" width=275><p><a href=https://tomcat.apache.org/index.html>https://tomcat.apache.org/index.html</a></p><p><a href=https://tomcat.apache.org/tomcat-9.0-doc/api/allclasses-noframe.html>https://tomcat.apache.org/tomcat-9.0-doc/api/allclasses-noframe.html</a></p><p><a href=https://tomcat.apache.org/tomcat-9.0-doc/jspapi/allclasses-noframe.html>https://tomcat.apache.org/tomcat-9.0-doc/jspapi/allclasses-noframe.html</a></p><p><a href=https://tomcat.apache.org/tomcat-9.0-doc/servletapi/allclasses-noframe.html>https://tomcat.apache.org/tomcat-9.0-doc/servletapi/allclasses-noframe.html</a></p></blockquote><h2 id=tomcat>Tomcat<a hidden class=anchor aria-hidden=true href=#tomcat>#</a></h2><img loading=lazy src=/blog/uploads/java-jsp-tomcat.png title=Tomcat width=275><h3 id=环境变量>环境变量<a hidden class=anchor aria-hidden=true href=#环境变量>#</a></h3><table><thead><tr><th style=text-align:left>变量值</th><th style=text-align:left>变量名</th><th></th></tr></thead><tbody><tr><td style=text-align:left>CATALINA_HOME</td><td style=text-align:left>D:\Download\apache-tomcat-9.0.0</td><td style=text-align:left>配置 Tomcat 安装路径</td></tr><tr><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</td><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</td><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</td></tr></tbody></table><h3 id=默认欢迎页>默认欢迎页<a hidden class=anchor aria-hidden=true href=#默认欢迎页>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>D:\Download\apache-tomcat-9.0.0\conf\web.xml
</span></span><span style=display:flex><span>⇳
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;welcome-file-list&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;welcome-file&gt;</span>index.html<span style=color:#f92672>&lt;/welcome-file&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;welcome-file&gt;</span>index.htm<span style=color:#f92672>&lt;/welcome-file&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;welcome-file&gt;</span>index.jsp<span style=color:#f92672>&lt;/welcome-file&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/welcome-file-list&gt;</span>
</span></span></code></pre></div><h3 id=默认端口号>默认端口号<a hidden class=anchor aria-hidden=true href=#默认端口号>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>D:\Download\apache-tomcat-9.0.0\conf\server.xml
</span></span><span style=display:flex><span>⇳
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Connector</span> <span style=color:#a6e22e>port=</span><span style=color:#e6db74>&#34;8080&#34;</span> <span style=color:#a6e22e>protocol=</span><span style=color:#e6db74>&#34;HTTP/1.1&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>connectionTimeout=</span><span style=color:#e6db74>&#34;20000&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>redirectPort=</span><span style=color:#e6db74>&#34;8443&#34;</span> <span style=color:#f92672>/&gt;</span>
</span></span></code></pre></div><h3 id=去掉空白行>去掉空白行<a hidden class=anchor aria-hidden=true href=#去掉空白行>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>全局
</span></span><span style=display:flex><span>----
</span></span><span style=display:flex><span>D:\Download\apache-tomcat-9.0.0\conf\web.xml
</span></span><span style=display:flex><span>⇳
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;init-param&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;param-name&gt;</span>trimSpaces<span style=color:#f92672>&lt;/param-name&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;param-value&gt;</span>true<span style=color:#f92672>&lt;/param-value&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/init-param&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>单个页面
</span></span><span style=display:flex><span>----
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;</span>%@ page trimDirectiveWhitespaces=&#34;true&#34; %&gt;
</span></span></code></pre></div><h3 id=idea-deployment>IDEA Deployment<a hidden class=anchor aria-hidden=true href=#idea-deployment>#</a></h3><pre tabindex=0><code>C:\Users\Administrator\.IntelliJIdea2016.3\system\tomcat\
</code></pre><h3 id=idea-dependence>IDEA Dependence<a hidden class=anchor aria-hidden=true href=#idea-dependence>#</a></h3><pre tabindex=0><code>Project Structure -&gt; Modules -&gt; Dependencies -&gt; Add -&gt; Library -&gt; Tomcat
</code></pre><h2 id=jsp>JSP<a hidden class=anchor aria-hidden=true href=#jsp>#</a></h2><h3 id=指令>指令<a hidden class=anchor aria-hidden=true href=#指令>#</a></h3><h4 id=page>page<a hidden class=anchor aria-hidden=true href=#page>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;</span>%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;</span>%@ page import=&#34;java.util.Arrays&#34; %&gt;
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;</span>%@ page import=&#34;java.util.HashMap&#34; %&gt;
</span></span></code></pre></div><h4 id=include>include<a hidden class=anchor aria-hidden=true href=#include>#</a></h4><pre tabindex=0><code>index.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

include 指令：
&lt;%@ include file=&#34;date.jsp&#34; %&gt;     声明需要包含的页面

include 动作：
&lt;jsp:include page=&#34;date.jsp&#34; flush=&#34;false&#34;/&gt;     声明需要包含的页面（flush 是否刷新缓冲区）

&lt;/body&gt;
&lt;/html&gt;

date.jsp     被包含的页面
----
&lt;%@ page import=&#34;java.text.SimpleDateFormat&#34; %&gt;
&lt;%@ page import=&#34;java.util.Date&#34; %&gt;
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;%
    String date = new SimpleDateFormat(&#34;yyyy-MM-dd HH:mm:ss&#34;).format(new Date());
    out.print(date);
%&gt;
</code></pre><h5 id=include-指令与-include-动作的对比>include 指令与 include 动作的对比<a hidden class=anchor aria-hidden=true href=#include-指令与-include-动作的对比>#</a></h5><table><thead><tr><th style=text-align:left></th><th style=text-align:left>include 指令</th><th style=text-align:left>include 动作</th></tr></thead><tbody><tr><td style=text-align:left></td><td style=text-align:left>静态包含</td><td style=text-align:left>动态包含</td></tr><tr><td style=text-align:left>生成内容</td><td style=text-align:left>文件内容</td><td style=text-align:left>执行结果</td></tr><tr><td style=text-align:left>生成 Servlet</td><td style=text-align:left>合并</td><td style=text-align:left>独立</td></tr><tr><td style=text-align:left>编译时间</td><td style=text-align:left>较慢</td><td style=text-align:left>较快（不解析资源）</td></tr><tr><td style=text-align:left>执行时间</td><td style=text-align:left>较快（不解析资源）</td><td style=text-align:left>较慢</td></tr><tr><td style=text-align:left>作用时间</td><td style=text-align:left>编译期间</td><td style=text-align:left>请求期间</td></tr><tr><td style=text-align:left>适用页面</td><td style=text-align:left>变化较少</td><td style=text-align:left>经常变化</td></tr><tr><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</td><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</td><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</td></tr></tbody></table><h4 id=taglib>taglib<a hidden class=anchor aria-hidden=true href=#taglib>#</a></h4><h3 id=注释>注释<a hidden class=anchor aria-hidden=true href=#注释>#</a></h3><pre tabindex=0><code>客户端可见注释：

&lt;!-- HTML 注释 --&gt;

客户端不可见注释：

&lt;%-- JSP 注释 --%&gt;

&lt;%
    // Java 单行注释
    /*
    *  Java 多行注释
    * */
%&gt;
</code></pre><h3 id=声明>声明<a hidden class=anchor aria-hidden=true href=#声明>#</a></h3><pre tabindex=0><code>&lt;%!     Servlet 中的成员（可声明为 static）
    private String s = &#34;ABC&#34;;     属性

    private int add(int x, int y) {     方法
        return x + y;
    }
%&gt;
</code></pre><h3 id=脚本>脚本<a hidden class=anchor aria-hidden=true href=#脚本>#</a></h3><pre tabindex=0><code>&lt;%     Servlet 中的 jspService() 的方法代码
    System.out.println(&#34;你好&#34;);     输出至控制台
    out.println(&#34;你好&#34;);     输出至页面（out 是内置对象，是 JspWriter 的实例化对象）
%&gt;
</code></pre><h3 id=表达式>表达式<a hidden class=anchor aria-hidden=true href=#表达式>#</a></h3><pre tabindex=0><code>&lt;%=s%&gt;     调用属性（注意表达式不加分号）
&lt;br&gt;
&lt;%=add(1, 2)%&gt;     调用方法

----
输出：
ABC
3
</code></pre><hr><pre tabindex=0><code>输出九九乘法表
----
&lt;%!     声明方法
    private String a() {
        DecimalFormat format = new DecimalFormat(&#34;00&#34;);
        StringBuilder s = new StringBuilder();
        for (int i = 1; i &lt;= 9; i++) {
            for (int j = 1; j &lt;= i; j++) {
                s.append(i).append(&#39;*&#39;).append(j).append(&#39;=&#39;).append(format.format(i * j)).append(&#34;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#34;);     空格
            }
            s.append(&#34;&lt;br&gt;&#34;);     换行
        }
        return s.toString();
    }
%&gt;

&lt;%=a()%&gt;     调用方法
</code></pre><h2 id=生命周期>生命周期<a hidden class=anchor aria-hidden=true href=#生命周期>#</a></h2><img loading=lazy src=/blog/uploads/java-jsp.svg title="Java Server Pages"><h2 id=内置对象>内置对象<a hidden class=anchor aria-hidden=true href=#内置对象>#</a></h2><h3 id=out>out<a hidden class=anchor aria-hidden=true href=#out>#</a></h3><h3 id=request>request<a hidden class=anchor aria-hidden=true href=#request>#</a></h3><pre tabindex=0><code>index.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录页面&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录页面&lt;/h1&gt;
&lt;hr&gt;
&lt;form action=&#34;doLogin.jsp&#34; name=&#34;loginForm&#34; method=&#34;post&#34;&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;账号：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;text&#34; name=&#34;account&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;密码：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;password&#34; name=&#34;password&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan=&#34;2&#34;&gt;&lt;input type=&#34;submit&#34; value=&#34;登录&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

doLogin.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;     指定输出字符集
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录成功&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%
    request.setCharacterEncoding(&#34;UTF-8&#34;);     指定输入字符集
    request.setAttribute(&#34;str&#34;, &#34;欢迎!&#34;);
%&gt;
&lt;h1&gt;登录成功&lt;/h1&gt;
&lt;hr&gt;
账号：&lt;%=request.getParameter(&#34;account&#34;)%&gt;&lt;br&gt;
密码：&lt;%=request.getParameter(&#34;password&#34;)%&gt;&lt;br&gt;
属性：&lt;%=request.getAttribute(&#34;str&#34;)%&gt;&lt;br&gt;
协议类型：&lt;%=request.getProtocol()%&gt;&lt;br&gt;
请求类型：&lt;%=request.getContentType()%&gt;&lt;br&gt;
请求大小：&lt;%=request.getContentLength()%&gt; 字节&lt;br&gt;
虚拟路径：&lt;%=request.getContextPath()%&gt;&lt;br&gt;
请求路径：&lt;%=request.getServletPath()%&gt;&lt;br&gt;
真实路径：&lt;%=request.getServletContext().getRealPath(&#34;doLogin.jsp&#34;)%&gt;&lt;br&gt;
主机名称：&lt;%=request.getServerName()%&gt;&lt;br&gt;
主机端口：&lt;%=request.getServerPort()%&gt;&lt;br&gt;
客户端 IP 地址：&lt;%=request.getRemoteAddr()%&gt;&lt;br&gt;
服务端 IP 地址：&lt;%=request.getLocalAddr()%&gt;&lt;br&gt;
&lt;/body&gt;
&lt;/html&gt;

----
输出：
账号：123456
密码：123456
属性：欢迎!
协议类型：HTTP/1.1
请求类型：application/x-www-form-urlencoded
请求大小：30 字节
虚拟路径：
请求路径：/doLogin.jsp
真实路径：C:\Users\Administrator\IdeaProjects\untitled1\out\artifacts\untitled1_war_exploded\doLogin.jsp
主机名称：localhost
主机端口：8080
客户端 IP 地址：0:0:0:0:0:0:0:1
服务端 IP 地址：0:0:0:0:0:0:0:1

Note：
真实路径：&lt;%=request.getServletContext().getRealPath(&#34;doLogin.jsp&#34;)%&gt;&lt;br&gt;
等同于
真实路径：&lt;%=request.getServletContext().getRealPath(request.getServletPath())%&gt;&lt;br&gt;
等同于
真实路径：&lt;%=application.getRealPath(request.getServletPath())%&gt;&lt;br&gt;
</code></pre><h3 id=response>response<a hidden class=anchor aria-hidden=true href=#response>#</a></h3><pre tabindex=0><code>&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%
    response.setContentType(&#34;text/html;charset=UTF-8&#34;);     与 page 指令中的 contentType 属性作用相同
    response.sendRedirect(&#34;request.jsp&#34;);     请求重定向（response）

    request.getRequestDispatcher(&#34;request.jsp&#34;).forward(request, response);     请求转发（request）
    等同于
    &lt;jsp:forward page=&#34;request.jsp&#34;/&gt;     JSP 动作：forward

    动作 forward 可添加参数：
    &lt;jsp:forward page=&#34;a.jsp&#34;&gt;
        &lt;jsp:param name=&#34;age&#34; value=&#34;25&#34;/&gt;     添加参数
        &lt;jsp:param name=&#34;sex&#34; value=&#34;男&#34;/&gt;
    &lt;/jsp:forward&gt;
    转发后的页面接收参数：
    &lt;%=request.getParameter(&#34;age&#34;)%&gt;&lt;br&gt;

%&gt;
&lt;/body&gt;
&lt;/html&gt;

Note：
请求重定向（客户端行为）（共发起 2 次请求）（游览器地址会改变）（不传递原有请求对象）（response）（302 临时跳转）
请求转发一（服务端行为）（共发起 1 次请求）（游览器地址不改变）（会传递原有请求对象）（request）
</code></pre><h3 id=session>session<a hidden class=anchor aria-hidden=true href=#session>#</a></h3><pre tabindex=0><code>index.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;%@ page import=&#34;java.text.SimpleDateFormat&#34; %&gt;
&lt;%@ page import=&#34;java.util.Date&#34; %&gt;
&lt;%@ page import=&#34;java.util.Enumeration&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%
    session.setAttribute(&#34;username&#34;, &#34;admin&#34;);
    session.setAttribute(&#34;password&#34;, &#34;123456&#34;);
    session.setAttribute(&#34;age&#34;, 20);
    session.setMaxInactiveInterval(3600);     设置生存间隔时间（秒）
%&gt;
Session ID：&lt;%=session.getId()%&gt;&lt;br&gt;
Session 一一创建时间：&lt;%=a(session.getCreationTime())%&gt;&lt;br&gt;
Session 最近请求时间：&lt;%=a(session.getLastAccessedTime())%&gt;&lt;br&gt;
Session 生存间隔时间：&lt;%=session.getMaxInactiveInterval()%&gt; 秒&lt;br&gt;
Session 中保存的属性：&lt;%
    Enumeration&lt;String&gt; attributeNames = session.getAttributeNames();
    StringBuilder s = new StringBuilder();
    while (attributeNames.hasMoreElements()) {
        String k = attributeNames.nextElement();
        Object v = session.getAttribute(k);
        s.append(k).append(&#39;=&#39;).append(v.toString()).append(&#34;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#34;);
    }
    out.print(s.toString());
%&gt;&lt;br&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;%!
    private SimpleDateFormat dateFormat = new SimpleDateFormat(&#34;yyyy-MM-dd HH:mm:ss&#34;);

    private String a(long i) {
        return dateFormat.format(new Date(i));
    }
%&gt;

----
输出：
Session ID：C9E1EDACE8806D15DA4BE0354BBD75E8
Session 一一创建时间：2017-03-11 20:37:55
Session 最近请求时间：2017-03-11 20:43:09
Session 生存间隔时间：3600 秒
Session 中保存的属性：password=123456    age=20    username=admin

Note：
Session 生命周期
----
1. 创建
首次访问（无 JSESSIONID Cookie）：发送 Cookie:JSESSIONID=4619A7A93D0DA9622F3FB06F93E2A328

2. 活动
重置 Session 生存间隔时间。

3. 销毁
主动：session.invalidate()、重启 Tomcat、重启浏览器（JSESSIONID Cookie 失效，导致 Session 过期）。
被动：Session 过期。

设置 Session 超时时间（默认 30 分钟）
----
session.setMaxInactiveInterval(1800);     秒

D:\Download\apache-tomcat-9.0.0\conf\web.xml（全局）
⇳
&lt;session-config&gt;
    &lt;session-timeout&gt;30&lt;/session-timeout&gt;     分
&lt;/session-config&gt;
</code></pre><h3 id=application>application<a hidden class=anchor aria-hidden=true href=#application>#</a></h3><pre tabindex=0><code>application 对象类似于 Java 中的 static 成员，属于 Web APP，由所有用户共享，可用于存放全局变量。
application 对象始于服务器，终于服务器。

----

&lt;%
    application.setAttribute(&#34;str&#34;, &#34;ABC&#34;);
    application.getAttribute(&#34;str&#34;);
    Enumeration&lt;String&gt; attributeNames = application.getAttributeNames();
    while (attributeNames.hasMoreElements()) {
        String k = attributeNames.nextElement();
        Object v = application.getAttribute(k);
        out.print(k + &#34; = &#34; + v + &#34;&lt;br&gt;&lt;br&gt;&#34;);
    }
%&gt;

&lt;%=application.getRealPath(request.getServletPath())%&gt;&lt;br&gt;
&lt;%=application.getServerInfo()%&gt;&lt;br&gt;
----
输出：
C:\Users\Administrator\IdeaProjects\untitled\out\artifacts\untitled_war_exploded\index.jsp
Apache Tomcat/9.0.0.M18
</code></pre><h3 id=page-1>page<a hidden class=anchor aria-hidden=true href=#page-1>#</a></h3><pre tabindex=0><code>page 对象类似于 Java 中的 this 指针，指代当前 JSP 页面本身，是 java.lang.Object 的实例。

----

&lt;%=page%&gt;
----
输出：
org.apache.jsp.index_jsp@2445d4f1
</code></pre><h3 id=pagecontext>pageContext<a hidden class=anchor aria-hidden=true href=#pagecontext>#</a></h3><pre tabindex=0><code>pageContext 对象提供了对 JSP 页面内所有的命名空间的访问，相当于页面中所有功能的集大成者。

----

pageContext.forward(&#34;a.jsp&#34;);     请求转发
pageContext.include(&#34;a.jsp&#34;);     使当前位置包含另一个页面的内容（类似 include 动作，生成独立的 Servlet）
</code></pre><h3 id=config>config<a hidden class=anchor aria-hidden=true href=#config>#</a></h3><pre tabindex=0><code>&lt;%
    StringBuilder s = new StringBuilder();
    Enumeration&lt;String&gt; initParameterNames = config.getInitParameterNames();
    while (initParameterNames.hasMoreElements()) {
        String k = initParameterNames.nextElement();
        String v = config.getInitParameter(k);
        s.append(k).append(&#34; = &#34;).append(v).append(&#34;&lt;br&gt;&#34;);
    }
    out.print(s.toString());
%&gt;

----
输出：
fork = false
trimSpaces = true
classdebuginfo = true
xpoweredBy = false
</code></pre><h3 id=exception>exception<a hidden class=anchor aria-hidden=true href=#exception>#</a></h3><pre tabindex=0><code>index.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; errorPage=&#34;a.jsp&#34; %&gt;     指定异常处理页面
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%
    int i = 100 / 0;     将产生运行时异常
%&gt;
&lt;/body&gt;
&lt;/html&gt;

a.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; isErrorPage=&#34;true&#34; %&gt;     设置为异常处理页面（可以使用 exception 对象）
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Exception&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%=exception.toString()%&gt;&lt;br&gt;     输出异常信息
&lt;/body&gt;
&lt;/html&gt;
</code></pre><hr><pre tabindex=0><code>index.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录页面&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录页面&lt;/h1&gt;
&lt;hr&gt;
&lt;form action=&#34;doLogin.jsp&#34; name=&#34;loginForm&#34; method=&#34;post&#34;&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;账号：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;text&#34; name=&#34;account&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;密码：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;password&#34; name=&#34;password&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;input type=&#34;reset&#34; value=&#34;重置&#34;&gt;&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;登录&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

doLogin.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;%
    request.setCharacterEncoding(&#34;UTF-8&#34;);     指定输入字符集
    String account = request.getParameter(&#34;account&#34;);
    String password = request.getParameter(&#34;password&#34;);
    if (&#34;admin&#34;.equals(account) &amp;&amp; &#34;123456&#34;.equals(password)) {
        request.getRequestDispatcher(&#34;login_successful.jsp&#34;).forward(request, response);     登录成功：请求转发
    } else {
        response.sendRedirect(&#34;login_failed.jsp&#34;);     登录失败：请求重定向
    }
%&gt;

login_successful.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录成功&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录成功&lt;/h1&gt;
&lt;hr&gt;
欢迎用户：&lt;%=request.getParameter(&#34;account&#34;)%&gt;
&lt;/body&gt;
&lt;/html&gt;

login_failed.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录失败&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录失败&lt;/h1&gt;
&lt;hr&gt;
&lt;a href=&#34;index.jsp&#34;&gt;返回登录页面&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h2 id=javabean>JavaBean<a hidden class=anchor aria-hidden=true href=#javabean>#</a></h2><p>符合某种设计规范的类，用于封装业务数据和业务逻辑，减少代码冗余，提高代码的可维护性。</p><h3 id=userbean>UserBean<a hidden class=anchor aria-hidden=true href=#userbean>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> a;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> {     公有类
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String username;     私有属性
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String password;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>User</span>() {     公有的无参构造方法
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getUsername</span>() {     公有 get<span style=color:#f92672>/</span>set
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> username;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setUsername</span>(String username) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>username</span> <span style=color:#f92672>=</span> username;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getPassword</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> password;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setPassword</span>(String password) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>password</span> <span style=color:#f92672>=</span> password;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;User{&#34;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;username=&#39;&#34;</span> <span style=color:#f92672>+</span> username <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#34;, password=&#39;&#34;</span> <span style=color:#f92672>+</span> password <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;\&#39;&#39;</span> <span style=color:#f92672>+</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;}&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=jsp-动作usebeansetgetproperty>JSP 动作：useBean、set（get）Property<a hidden class=anchor aria-hidden=true href=#jsp-动作usebeansetgetproperty>#</a></h3><pre tabindex=0><code>&lt;%@ page import=&#34;a.User&#34; %&gt;
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

普通方式
----
&lt;%
    User a = new User();
    a.setUsername(&#34;admin&#34;);
    a.setPassword(&#34;123456&#34;);
%&gt;
账户：&lt;%=a.getUsername()%&gt;&lt;br&gt;
密码：&lt;%=a.getPassword()%&gt;&lt;br&gt;

使用 JSP 动作
----
useBean
&lt;jsp:useBean id=&#34;b&#34; class=&#34;a.User&#34; scope=&#34;page&#34;/&gt;     在指定范围内实例化 JavaBean（默认范围为 page）

setProperty
&lt;jsp:setProperty name=&#34;b&#34; property=&#34;*&#34;/&gt;     根据表单自动匹配所有属性（跟表单关联）

&lt;jsp:setProperty name=&#34;b&#34; property=&#34;username&#34;/&gt;     根据表单手动匹配部分属性（跟表单关联）
&lt;jsp:setProperty name=&#34;b&#34; property=&#34;password&#34;/&gt;

&lt;jsp:setProperty name=&#34;b&#34; property=&#34;username&#34; value=&#34;admin&#34;/&gt;     手动设置属性值
&lt;jsp:setProperty name=&#34;b&#34; property=&#34;password&#34; value=&#34;123456&#34;/&gt;

&lt;jsp:setProperty name=&#34;b&#34; property=&#34;username&#34; param=&#34;abc&#34;/&gt;     根据 URL 参数给属性赋值
&lt;jsp:setProperty name=&#34;b&#34; property=&#34;password&#34; param=&#34;def&#34;/&gt;
&lt;!--http://localhost:8080/index.jsp?abc=123&amp;def=456--&gt;

getProperty
账户：&lt;jsp:getProperty name=&#34;b&#34; property=&#34;username&#34;/&gt;&lt;br&gt;
密码：&lt;jsp:getProperty name=&#34;b&#34; property=&#34;password&#34;/&gt;&lt;br&gt;

&lt;/body&gt;
&lt;/html&gt;

useBean 作用域范围
----
作用于单个页面的生命周期：page
作用于单个请求的生命周期：request
作用于整个会话的生命周期：session
作用于整个应用的生命周期：application

https://tomcat.apache.org/tomcat-9.0-doc/jspapi/javax/servlet/jsp/PageContext.html#PAGE_SCOPE
https://tomcat.apache.org/tomcat-9.0-doc/jspapi/javax/servlet/jsp/JspContext.html#setAttribute-java.lang.String-java.lang.Object-int-
</code></pre><hr><pre tabindex=0><code>User.java     用封装业务数据
----
package a;

public class User {
    private String username;
    private String password;

    public User() {
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Override
    public String toString() {
        return &#34;User{&#34; +
                &#34;username=&#39;&#34; + username + &#39;\&#39;&#39; +
                &#34;, password=&#39;&#34; + password + &#39;\&#39;&#39; +
                &#39;}&#39;;
    }
}

UserDAO.java     用于封装业务逻辑
----
package a;

public class UserDAO {
    public boolean userLogin(User user) {
        return &#34;admin&#34;.equals(user.getUsername()) &amp;&amp; &#34;123456&#34;.equals(user.getPassword());
    }
}

index.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录页面&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录页面&lt;/h1&gt;
&lt;hr&gt;
&lt;form action=&#34;doLogin.jsp&#34; name=&#34;loginForm&#34; method=&#34;post&#34;&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;账号：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;text&#34; name=&#34;username&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;密码：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;password&#34; name=&#34;password&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;input type=&#34;reset&#34; value=&#34;重置&#34;&gt;&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;登录&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

doLogin.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;jsp:useBean id=&#34;userDAO&#34; class=&#34;a.UserDAO&#34;/&gt;     默认生命周期为 page
&lt;jsp:useBean id=&#34;loginUser&#34; class=&#34;a.User&#34; scope=&#34;session&#34;/&gt;     指定生命周期为 session
&lt;jsp:setProperty name=&#34;loginUser&#34; property=&#34;*&#34;/&gt;     根据表单自动匹配所有属性
&lt;%
    request.setCharacterEncoding(&#34;UTF-8&#34;);     指定输入字符集
    if (userDAO.userLogin(loginUser)) {
        request.getRequestDispatcher(&#34;login_successful.jsp&#34;).forward(request, response);     登录成功：请求转发
    } else {
        response.sendRedirect(&#34;login_failed.jsp&#34;);     登录失败：请求重定向
    }
%&gt;

login_successful.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;jsp:useBean id=&#34;loginUser&#34; class=&#34;a.User&#34; scope=&#34;session&#34;/&gt;     在整个 Session 中只有同一个 loginUser
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录成功&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录成功&lt;/h1&gt;
&lt;hr&gt;
欢迎用户：&lt;%=loginUser.getUsername()%&gt;
&lt;/body&gt;
&lt;/html&gt;

login_failed.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录失败&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录失败&lt;/h1&gt;
&lt;hr&gt;
&lt;a href=&#34;/&#34;&gt;返回登录页面&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h2 id=cookie>Cookie<a hidden class=anchor aria-hidden=true href=#cookie>#</a></h2><pre tabindex=0><code>index.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;%
    String username = &#34;&#34;;
    String password = &#34;&#34;;
    Cookie[] cookies = request.getCookies();
    if (cookies != null &amp;&amp; cookies.length &gt; 0) {
        for (Cookie c : cookies) {
            if (c.getName().equals(&#34;username&#34;)) {
                username = c.getValue();
            }
            if (c.getName().equals(&#34;password&#34;)) {
                password = c.getValue();
            }
        }
    }
%&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录页面&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录页面&lt;/h1&gt;
&lt;hr&gt;
&lt;form action=&#34;doLogin.jsp&#34; name=&#34;loginForm&#34; method=&#34;post&#34;&gt;
    &lt;table&gt;
        &lt;tr&gt;
            &lt;td&gt;账号：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;text&#34; name=&#34;username&#34; value=&#34;&lt;%=username%&gt;&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;密码：&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;password&#34; name=&#34;password&#34; value=&#34;&lt;%=password%&gt;&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan=&#34;2&#34;&gt;&lt;input type=&#34;checkbox&#34; name=&#34;isUseCookie&#34; checked&gt;记住登录状态&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;input type=&#34;reset&#34; value=&#34;重置&#34;&gt;&lt;/td&gt;
            &lt;td&gt;&lt;input type=&#34;submit&#34; value=&#34;登录&#34;&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;

doLogin.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;jsp:useBean id=&#34;userDAO&#34; class=&#34;a.UserDAO&#34;/&gt;
&lt;jsp:useBean id=&#34;loginUser&#34; class=&#34;a.User&#34; scope=&#34;session&#34;/&gt;
&lt;jsp:setProperty name=&#34;loginUser&#34; property=&#34;*&#34;/&gt;
&lt;%
    request.setCharacterEncoding(&#34;UTF-8&#34;);
    if (userDAO.userLogin(loginUser)) {
        request.getRequestDispatcher(&#34;login_successful.jsp&#34;).forward(request, response);
    } else {
        response.sendRedirect(&#34;login_failed.jsp&#34;);
    }
%&gt;

login_successful.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;jsp:useBean id=&#34;loginUser&#34; class=&#34;a.User&#34; scope=&#34;session&#34;/&gt;
&lt;%
    String isUseCookie = request.getParameter(&#34;isUseCookie&#34;);
    if (isUseCookie != null) {
        Cookie username = new Cookie(&#34;username&#34;, loginUser.getUsername());     创建
        Cookie password = new Cookie(&#34;password&#34;, loginUser.getPassword());
        username.setMaxAge(86400);     设置 Cookie 有效期为 1 天（单位：秒）（若未设置，默认为浏览会话结束时过期）
        password.setMaxAge(86400);
        response.addCookie(username);     写入
        response.addCookie(password);
    } else {
        Cookie[] cookies = request.getCookies();     读取
        if (cookies != null &amp;&amp; cookies.length &gt; 0) {
            for (Cookie c : cookies) {
                if (c.getName().equals(&#34;username&#34;) || c.getName().equals(&#34;password&#34;)) {
                    c.setMaxAge(0);     设置 Cookie 立即过期
                    response.addCookie(c);     写入
                }
            }
        }
    }
%&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录成功&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录成功&lt;/h1&gt;
&lt;hr&gt;
&lt;a href=&#34;user.jsp&#34;&gt;查看用户信息&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;

login_failed.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;%
    Cookie[] cookies = request.getCookies();
    if (cookies != null &amp;&amp; cookies.length &gt; 0) {
        for (Cookie c : cookies) {
            if (c.getName().equals(&#34;username&#34;) || c.getName().equals(&#34;password&#34;)) {
                c.setMaxAge(0);
                response.addCookie(c);
            }
        }
    }
%&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;登录失败&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;登录失败&lt;/h1&gt;
&lt;hr&gt;
&lt;a href=&#34;/&#34;&gt;返回登录页面&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;

user.jsp
----
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt;
&lt;%
    String username = &#34;&#34;;
    String password = &#34;&#34;;
    Cookie[] cookies = request.getCookies();
    if (cookies != null &amp;&amp; cookies.length &gt; 0) {
        for (Cookie c : cookies) {
            if (c.getName().equals(&#34;username&#34;)) {
                username = c.getValue();
            }
            if (c.getName().equals(&#34;password&#34;)) {
                password = c.getValue();
            }
        }
    }
%&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;用户信息&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;用户信息&lt;/h1&gt;
&lt;hr&gt;
账户：&lt;%=username%&gt;&lt;br&gt;
密码：&lt;%=password%&gt;&lt;br&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><h3 id=cookie-与-session-的对比>Cookie 与 Session 的对比<a hidden class=anchor aria-hidden=true href=#cookie-与-session-的对比>#</a></h3><table><thead><tr><th style=text-align:left></th><th style=text-align:left>Session</th><th style=text-align:left>Cookie</th></tr></thead><tbody><tr><td style=text-align:left>保存位置</td><td style=text-align:left>服务端</td><td style=text-align:left>客户端</td></tr><tr><td style=text-align:left>保存类型</td><td style=text-align:left>Object 类</td><td style=text-align:left>String 类</td></tr><tr><td style=text-align:left>保存数据</td><td style=text-align:left>保存 <strong>重要</strong> 的数据</td><td style=text-align:left>保存 <strong>不重要</strong> 的数据</td></tr><tr><td style=text-align:left>保存时间</td><td style=text-align:left>随 <strong>会话结束</strong> 而结束</td><td style=text-align:left>可以 <strong>长期</strong> 保存至客户端</td></tr><tr><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;</td><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</td><td style=text-align:left>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;</td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags><li><a href=https://xhstormr.github.io/blog/tags/jsp/>JSP</a></li></ul><nav class=paginav><a class=prev href=https://xhstormr.github.io/blog/posts/jsp-model1/><span class=title>« Prev</span><br><span>JSP Model1</span>
</a><a class=next href=https://xhstormr.github.io/blog/posts/postgresql/><span class=title>Next »</span><br><span>自学 PostgreSQL</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Java Server Pages on x" href="https://x.com/intent/tweet/?text=Java%20Server%20Pages&amp;url=https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f&amp;hashtags=JSP"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Java Server Pages on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f&amp;title=Java%20Server%20Pages&amp;summary=Java%20Server%20Pages&amp;source=https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Java Server Pages on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f&title=Java%20Server%20Pages"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Java Server Pages on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Java Server Pages on whatsapp" href="https://api.whatsapp.com/send?text=Java%20Server%20Pages%20-%20https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Java Server Pages on telegram" href="https://telegram.me/share/url?text=Java%20Server%20Pages&amp;url=https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Java Server Pages on ycombinator" href="https://news.ycombinator.com/submitlink?t=Java%20Server%20Pages&u=https%3a%2f%2fxhstormr.github.io%2fblog%2fposts%2fjsp%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://xhstormr.github.io/blog/>XhstormR</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>